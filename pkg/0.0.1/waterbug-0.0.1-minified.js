WaterBug=new Object();WaterBug.load=function(){WaterBug.inspect_mode=0;WaterBug.display_wrapper=WaterBug.adapter().create('div',{id:'water_bug_display_wrapper',style:"position: fixed; bottom: 0px; left: 0px; width: 100%; height: 330px; background-color: #000; padding: 0px; z-index: 1000;"});WaterBug.header=WaterBug.adapter().create('div',{id:'water_bug_display_header',style:"background-color: #333;height: 20px;"});WaterBug.display1=WaterBug.adapter().create('div',{style:"width: 47%; margin: 0; background-color: #FFF; overflow: scroll; height: 260px; padding: 10px; overflow: hidden; float: left;"});WaterBug.display2=WaterBug.adapter().create('div',{style:"width: 48%;margin: 0; margin-left: 1%;  background-color: #FFF; overflow: scroll; height: 260px; padding: 10px; overflow: hidden; float: left;"});WaterBug.display3=WaterBug.adapter().create('div',{style:"display: none;clear: both;"});WaterBug.close_link=WaterBug.adapter().create('a',{style:"width: 40px; height: 20px; color: #FFF; position: absolute; top: 1px; right: 15px; font-size: 12px; cursor: pointer;"});WaterBug.hide_link=WaterBug.adapter().create('a',{style:"width: 40px; height: 20px; color: #FFF; position: absolute; top: 1px; right: 15px; font-size: 12px; cursor: pointer;"});WaterBug.label=WaterBug.adapter().create('a',{style:"width: 100px; height: 20px; color: #FFF; position: absolute; top: 1px; left: 15px; font-size: 12px;",href:'http://applicake.com/'});WaterBug.styles='<style type="text/css">   #water_bug_command_history { padding: 3px; }  #water_bug_command_history p { margin: 0; padding: 0}  #water_bug_command_history p.command { color: #999; }  #water_bug_command_history p.result { font-weight: bold; }  #water_bug_command_history p.error { color: red; }  </style>';WaterBug.close_link.innerHTML='X close';WaterBug.hide_link.innerHTML='_ hide';WaterBug.label.innerHTML='WaterBug';WaterBug.close_link.onclick=function(){WaterBug.unload()};WaterBug.close_link._onclick=WaterBug.close_link.onclick WaterBug.hide_link.onclick=function(){WaterBug.toggle_visibility()};WaterBug.hide_link._onclick=WaterBug.hide_link.onclick WaterBug.display_wrapper.insert(WaterBug.header,{position:'bottom'});WaterBug.display_wrapper.insert(WaterBug.display1,{position:'bottom'});WaterBug.display_wrapper.insert(WaterBug.display2,{position:'bottom'});WaterBug.display_wrapper.insert(WaterBug.display3,{position:'bottom'});WaterBug.display_wrapper.insert(WaterBug.hide_link,{position:'bottom'});WaterBug.display_wrapper.insert(WaterBug.label,{position:'bottom'});WaterBug.display_wrapper.insert(WaterBug.styles,{position:'bottom'});document.body.insert(WaterBug.display_wrapper,{position:'bottom'});WaterBug.display1.innerHTML='<div id="water_bug_command_history" style="width: 100%; height: 230px; text-align: left; border:1px solid #999; overflow: auto"></div><table style="width: 100%"><tr><td><input type="text" id="water_bug_command_line" style="width: 100%;" /></td><td style="width: 70px"><input type="submit" id="water_bug_command_button" style="border:1px solid #999" value="Run" /></td></tr></table>';WaterBug.display2.innerHTML='<a href="#" id="water_bug_inspect_button">INSPECT</a><br /><p id="wb_object_name" style="font-size:10px;"></p><br /><input type="text" id="water_bug_property_name" /><input type="text" id="water_bug_property_value" /><a onclick="WaterBug.inspect_property();">refresh</a>';WaterBug.command_button=WaterBug.adapter().get('water_bug_command_button');WaterBug.command_line=WaterBug.adapter().get('water_bug_command_line');WaterBug.command_history=WaterBug.adapter().get('water_bug_command_history');WaterBug.inspect_button=WaterBug.adapter().get('water_bug_inspect_button');WaterBug.property_name_field=WaterBug.adapter().get('water_bug_property_name');WaterBug.property_value_field=WaterBug.adapter().get('water_bug_property_value');WaterBug.command_line.onkeypress=function(a){if(document.layers){key=a.which}else if(typeof(a.keyCode)!='undefined'){key=a.keyCode}else{key=window.event.keyCode}if(key=='13')WaterBug.run()if(key=='38')WaterBug.Runner.back()if(key=='40')WaterBug.Runner.forward()}WaterBug.command_button.onclick=WaterBug.run;WaterBug.command_button._onclick=WaterBug.run;WaterBug.inspect_button.onclick=WaterBug.toggle_inspect_mode;WaterBug.inspect_button._onclick=WaterBug.toggle_inspect_mode;WaterBug.property_name_field.onchange=WaterBug.inspect_property;WaterBug.property_name_field.onkeyup=WaterBug.inspect_property;WaterBug.property_value_field.onchange=WaterBug.set_property;WaterBug.property_value_field.onkeyup=WaterBug.set_property;WaterBug.display_wrapper.style.height='20px'}WaterBug.unload=function(){WaterBug.display_wrapper.remove()}WaterBug.toggle_visibility=function(){if(0+WaterBug.display_wrapper.style.height.replace("px","")>100){WaterBug.display_wrapper.style.height='20px';WaterBug.display_wrapper.style.overflow='hidden'}else{WaterBug.display_wrapper.style.height='300px'}}WaterBug.Adapters=new Object()WaterBug.adapter=function(){if(typeof(Prototype)!='undefined')return WaterBug.Adapters.Prototype if(typeof(jQuery)!='undefined'){if(!document.body.insert){document.body.insert=function(a){$(this).append(a)}}return WaterBug.Adapters.jQuery}}WaterBug.Highlighter=new Object()WaterBug.Highlighter.current=null WaterBug.Highlighter.highlight=function(a){if((!WaterBug.skip_highlighting)||(new Date-WaterBug.skip_highlighting>100)){if((a)&&(a.style)&&(!(a.wb_highlighted))){if(WaterBug.Highlighter.current)WaterBug.Highlighter.unhighlight(WaterBug.Highlighter.current)a.wb_highlighted=1;WaterBug.skip_highlighting=new Date;a.original_border=a.style.border;a.style.border="1px dotted #F00";WaterBug.Highlighter.current=a}}}WaterBug.Highlighter.unhighlight=function(a){if((a)&&(a.style)&&(a.wb_highlighted)){a.wb_highlighted=0;WaterBug.skip_highlighting=null;a.style.border=a.original_border;a.original_border=null;WaterBug.Highlighter.unhighlight}}WaterBug.unhighlight=WaterBug.Highlighter.unhighlight WaterBug.highlight=WaterBug.Highlighter.highlight WaterBug.inspect_property=function(){var a=WaterBug.property_name_field.value;if((a.length>0)&&(WaterBug.selected_element)){WaterBug.property_value_field.value=WaterBug.selected_element.getStyle(a);WaterBug.property_value_field.style.background="#0F0"}else WaterBug.property_value_field.value='???'}WaterBug.set_property=function(){var a=WaterBug.property_name_field.value;var c=WaterBug.property_value_field.value;var b='WaterBug.selected_element.style.'+a+'="'+c+'"';if((b.length>0)&&(WaterBug.selected_element)&&(WaterBug.selected_element.style))try{WaterBug.property_value_field.value=eval(b);WaterBug.property_value_field.style.background="#0F0"}catch(err){WaterBug.property_value_field.style.background="#F00"}}WaterBug.toggle_inspect_mode=function(){var b=WaterBug.adapter().$$('*').concat($$('p')).concat($$('select')).concat($$('input')).concat($$('span')).concat($$('a'));if(WaterBug.inspect_mode){WaterBug.inspect_mode=0;WaterBug.inspect_button.innerHTML="INSPECT";if(WaterBug.Highlighter.current)WaterBug.Highlighter.unhighlight(WaterBug.Highlighter.current)b.each(function(element){if((element.id!='water_bug_display_wrapper')&&(!element.descendantOf('water_bug_display_wrapper'))){element.onclick=null;element.onmouseover=null;element.onmouseout=null}})}else{WaterBug.inspect_mode=1;WaterBug.inspect_button.innerHTML="STOP INSPECTING";b.each(function(a){if((a.id!='water_bug_display_wrapper')&&(!a.descendantOf('water_bug_display_wrapper'))){a.onclick=function(){WaterBug.inspect(this)}a.onmouseover=function(){WaterBug.highlight(a);return true}}});WaterBug.adapter().$$('#water_bug_display_wrapper *').each(function(c){c.onclick=function(a){if(this._onclick)this._onclick()a.stop()}})}};WaterBug.inspect=function(a){if((!WaterBug.skip_inspecting)||(new Date-WaterBug.skip_inspecting>500)){WaterBug.skip_inspecting=new Date;WaterBug.selected_element=a;var c='';var b=a;while((b)&&(b.identify)){c=' > <span style="color:#0A0;">'+b.tagName+'</span><span style="color:#F00;">#</span><a onclick="WaterBug.inspect($(\''+b.identify()+'\'))">'+b.identify()+'</a>'+c;b=b.up()}WaterBug.display2.down('p').innerHTML=c}}WaterBug.Runner=new Object()WaterBug.Runner.history=[]WaterBug.Runner.back=function(){history_point=WaterBug.command_line.history_point if(!history_point)history_point=WaterBug.Runner.history.length history_point=history_point-1 history_command=WaterBug.Runner.history[history_point]WaterBug.command_line.history_point=history_point WaterBug.command_line.value=history_command}WaterBug.Runner.forward=function(){history_point=WaterBug.command_line.history_point if(typeof(history_point)=='undefined')history_point=WaterBug.Runner.history.length history_point=history_point+1 if(history_point>=WaterBug.Runner.history.length)history_point=0 history_command=WaterBug.Runner.history[history_point]WaterBug.command_line.history_point=history_point WaterBug.command_line.value=history_command}WaterBug.Runner.run=function(){command=WaterBug.command_line.value;WaterBug.command_line.value='';if(!command||command=='')return var a='';try{a='<p class="command">&gt;'+command+'</p><p class="result">'+eval(command)+'</p>'}catch(err){a='<p class="command">&gt;'+command+'</p><p class="error">ERROR:'+err+'</p>'}WaterBug.Runner.history.push(command);WaterBug.command_line.history_point=WaterBug.Runner.history.length WaterBug.command_history.innerHTML+=a;WaterBug.command_history.scrollTop=WaterBug.command_history.scrollHeight}WaterBug.run=WaterBug.Runner.run WaterBug.Adapters.jQuery={$:function(a){return jQuery(a)},$$:function(a){return jQuery(a)},get:function(a){return document.getElementById(a)},create:function(b,e){var d=document.createElement(b);$.each(e,function(a,c){$(d).attr(a,c)});d.insert=function(a){$(this).append(a)}d.remove=function(a){$(this).remove()}return d}}WaterBug.Adapters.Prototype={get:function(a){return $(a)},create:function(a,c){return new Element(a,c)},$$:function(a){return $$(a)}}WaterBug.load()